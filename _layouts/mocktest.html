---
layout: base
---
<h1><strong>Subject:</strong> {{ page.subject }}</h1>
<h2><strong>Topic:</strong> {{ page.topic }}</h2>
<div id="mockTestContainer">
  <div id="progress"></div>
  <div id="questionCard">
    <h2 id="questionText"></h2>
    <form id="mockTestForm">
      <div id="optionsContainer"></div>
      <button type="submit">Submit</button>
    </form>
  </div>
  <div id="feedback" style="display:none;"></div>
</div>
<div id="reviewContainer" style="display:none;">
  <h2>Your Answers</h2>
  <div id="reviewList"></div>
  <button id="restartTest">Restart Test</button>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
$(document).ready(function() {
  const questions = {{ page.questions | jsonify }};
  let currentQuestionIndex = 0;
  let score = 0;
  let userAnswers = [];

  function displayQuestion() {
    const question = questions[currentQuestionIndex];
    $('#questionText').text(question.question);
    $('#optionsContainer').empty();

    question.options.forEach((option) => {
      $('#optionsContainer').append(`
        <div class="option">
          <label>
            <input type="radio" name="answer" value="${option}"> ${option}
          </label>
        </div>
      `);
    });

    updateProgress();
  }

  function updateProgress() {
    $('#progress').text(`Question ${currentQuestionIndex + 1} of ${questions.length}`);
  }

  function showFeedback(isCorrect) {
    const correctAnswer = questions[currentQuestionIndex].answer;
    const feedbackText = isCorrect ? "Correct!" : `Incorrect. The correct answer is: ${correctAnswer}`;
    $('#feedback').text(feedbackText).show();
  }

  $('#mockTestForm').on('submit', function(e) {
    e.preventDefault();
    const selectedOption = $('input[name="answer"]:checked').val();

    if (selectedOption) {
      const isCorrect = selectedOption === questions[currentQuestionIndex].answer;
      if (isCorrect) score++;
      userAnswers.push({ question: questions[currentQuestionIndex].question, selected: selectedOption, correct: questions[currentQuestionIndex].answer });
      showFeedback(isCorrect);

      // Move to the next question after a short delay
      setTimeout(() => {
        currentQuestionIndex++;
        $('#feedback').hide();
        if (currentQuestionIndex < questions.length) {
          displayQuestion();
        } else {
          displayReview();
        }
      }, 2000); // 2 seconds delay
    } else {
      $('#feedback').text("Please select an answer.").show();
    }
  });

  function displayReview() {
    $('#mockTestContainer').hide();
    $('#reviewContainer').show();
    $('#reviewList').empty();
    userAnswers.forEach((answer) => {
      $('#reviewList').append(`<p>${answer.question} <br> Your Answer: ${answer.selected} <br> Correct Answer: ${answer.correct}</p>`);
    });
    $('#reviewList').append(`<h3>Your Score: ${score}/${questions.length}</h3>`);
  }

  $('#restartTest').on('click', function() {
    currentQuestionIndex = 0;
    score = 0;
    userAnswers = [];
    $('#reviewContainer').hide();
    $('#mockTestContainer').show();
    displayQuestion();
  });

  displayQuestion(); // Initial call to display the first question
});
</script>

<style>
#mockTestContainer, #reviewContainer {
  max-width: 600px;
  margin: auto;
  text-align: center;
}

#questionCard {
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 20px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  margin-bottom: 20px;
}

button {
  background-color: #007bff;
  color: white;
  border: none;
  border-radius: 4px;
  padding: 10px 20px;
  cursor: pointer;
}

button:hover {
  background-color: #0056b3;
}

#optionsContainer {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  margin-top: 20px;
}

.option {
  margin-bottom: 10px;
}

input[type="radio"] {
  margin-right: 10px;
}

#feedback {
  margin-top: 20px;
  font-weight: bold;
  font-size: 1.2em;
}

#progress {
  font-size: 1.1em;
  margin-bottom: 10px;
}
</style>
